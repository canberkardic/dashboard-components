<mat-sidenav-container [hasBackdrop]="false">
    <mat-toolbar>
        <button *ngIf="!editDashboardNameMode" style="font-size: 20px;" mat-button [matMenuTriggerFor]="dashboardMenu">
            <span class="centered">
                <span> {{ dashboardName }} </span>
            <mat-icon>arrow_drop_down</mat-icon>
        </span>
        </button>

        <input matInputs class="dashboardNameInput" autocomplete="off" *ngIf='editDashboardNameMode' [(ngModel)]='dashboardName'
            appAutofocus type='text'>

        <button mat-icon-button *ngIf="!editDashboardNameMode" (click)="editDashboardName()">
            <mat-icon>edit</mat-icon>
        </button>

        <button mat-icon-button *ngIf="editDashboardNameMode" (click)="saveDashboardName()">
            <mat-icon>save</mat-icon>
        </button>

        <mat-menu #dashboardMenu="matMenu">
        <mat-list class="centered" role="list" *ngFor="let d of dashboards">
            <mat-list-item role="listitem">
        
                <button class="centered" mat-button target="_blank" (click)="onMenuClick(d)">
                    <span>{{d.name}}</span>
                    <mat-icon>dashboard</mat-icon>
                </button>
                <button style="float: right;" mat-icon-button target="_blank" (click)="onNewTab(d);$event.stopPropagation()">
                    <mat-icon>open_in_new</mat-icon>
                </button>
                </mat-list-item>
                
                </mat-list>


        </mat-menu>

        <span class="menu-spacer"></span>

        <div>

            <button style="font-size: 20px;" mat-button class="crm-command-bar-button" (click)="onToggleSidenav()">
                <mat-icon>widgets</mat-icon>
                Widget List
            </button>
        </div>
    </mat-toolbar>


    <mat-sidenav #componentsSidenav position="end" mode="over" autosize>
        <mat-list style="padding: 10px;">

            <button mat-stroked-button (click)="onToggleSidenav()" style="width: 100%;">
                Close
                <i class="pi pi-arrow-right"></i>
            </button>

            <hr>

            <mat-card *ngFor="let item of sidenavItems" style="padding: 15px; margin-bottom: 10px; text-align: center;">

                <div class="draggables" draggable="true" (dragstart)="onDragStart($event, item)">
                    <img mat-card-sm-image [src]="item.icon">

                    <mat-card-content>
                        <mat-card-subtitle>
                            {{item.componentName }}
                        </mat-card-subtitle>
                    </mat-card-content>
                </div>

            </mat-card>
        </mat-list>
    </mat-sidenav>

    <div style="width: 100%; height: 100vh;">
        <dashboard [dashboardId]="dashboardId" [dashboardName]="dashboardName"></dashboard>
    </div>
</mat-sidenav-container>